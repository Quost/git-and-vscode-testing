{"version":3,"sources":["./src/app/pages/listar-centro-de-custo/listar-centro-de-custo.page.html","./src/app/pages/listar-centro-de-custo/listar-centro-de-custo-routing.module.ts","./src/app/pages/listar-centro-de-custo/listar-centro-de-custo.module.ts","./src/app/pages/listar-centro-de-custo/listar-centro-de-custo.page.scss","./src/app/pages/listar-centro-de-custo/listar-centro-de-custo.page.ts","./src/app/services/database.service.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,m9DAAo5D,WAAW,oCAAoC,mBAAmB,qoBAAqoB,WAAW,6kBAA6kB,aAAa,qDAAqD,oBAAoB,qDAAqD,qBAAqB,yI;;;;;;;;;;;;;;;;;;;ACAzzG;AACc;AAEiB;AAExE,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,oFAAuB;KACnC;CACF,CAAC;AAMF,IAAa,oCAAoC,GAAjD,MAAa,oCAAoC;CAAG;AAAvC,oCAAoC;IAJhD,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,oCAAoC,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;AChBR;AACM;AACF;AAEA;AAEkD;AAEvB;AAWxE,IAAa,6BAA6B,GAA1C,MAAa,6BAA6B;CAAG;AAAhC,6BAA6B;IATzC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,2GAAoC;SACrC;QACD,YAAY,EAAE,CAAC,oFAAuB,CAAC;KACxC,CAAC;GACW,6BAA6B,CAAG;AAAH;;;;;;;;;;;;;ACnB1C;AAAe,yEAAU,6BAA6B,0BAA0B,GAAG,6CAA6C,2rB;;;;;;;;;;;;;;;;;;ACA9E;AAEuB;AAQzE,IAAa,uBAAuB,GAApC,MAAa,uBAAuB;IAWlC,YAAoB,EAAmB;QAAnB,OAAE,GAAF,EAAE,CAAiB;QATvC,QAAG,GAAU,EAAE,CAAC;QAIhB,gBAAW,GAAG,EAAE,CAAC;QACjB,YAAO,GAAG,EAAE,CAAC;QAEb,iBAAY,GAAG,KAAK,CAAC;IAEsB,CAAC;IAE5C,QAAQ;QACN,IAAI,CAAC,EAAE,CAAC,gBAAgB,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;YACzC,IAAI,GAAG,EAAE;gBACP,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;oBAC/B,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;gBACzB,CAAC,CAAC;gBACF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC;aACvC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;aAC7E,IAAI,CAAC,CAAC,CAAC,EAAE;YACR,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU;QACR,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;aAClG,IAAI,CAAC,CAAC,CAAC,EAAE;YACR,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;CAiDF;;YA1EyB,iFAAe;;AAX5B,uBAAuB;IALnC,+DAAS,CAAC;QACT,QAAQ,EAAE,4BAA4B;QACtC,kQAAiD;;KAElD,CAAC;2EAYwB,iFAAe;GAX5B,uBAAuB,CAqFnC;AArFmC;;;;;;;;;;;;;;;;;;;;;;;ACVO;AAED;AACqB;AACb;AACc;AACb;AAWnD,IAAa,eAAe,GAA5B,MAAa,eAAe;IAO1B,YAAoB,GAAa,EAAU,YAA0B,EAAU,MAAc,EAAU,IAAgB;QAAnG,QAAG,GAAH,GAAG,CAAU;QAAU,iBAAY,GAAZ,YAAY,CAAc;QAAU,WAAM,GAAN,MAAM,CAAQ;QAAU,SAAI,GAAJ,IAAI,CAAY;QAL/G,YAAO,GAA6B,IAAI,oDAAe,CAAC,KAAK,CAAC,CAAC;QAEvE,gBAAW,GAAG,IAAI,oDAAe,CAAC,EAAE,CAAC,CAAC;QACtC,aAAQ,GAAG,IAAI,oDAAe,CAAC,EAAE,CAAC,CAAC;QAGjC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;YACzB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;gBACjB,IAAI,EAAE,eAAe;gBACrB,QAAQ,EAAE,SAAS;aACpB,CAAC;iBACD,IAAI,CAAC,CAAC,EAAgB,EAAE,EAAE;gBACvB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;gBACnB,IAAI,CAAC,YAAY,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,YAAY;QACV,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,6BAA6B,EAAE,EAAE,YAAY,EAAE,MAAM,EAAC,CAAC;aACpE,SAAS,CAAC,GAAG,CAAC,EAAE;YACf,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAG,CAAC;iBAChD,IAAI,CAAC,CAAC,CAAC,EAAE;gBACR,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1B,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAClC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,gBAAgB;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;IACrC,CAAC;IAED,MAAM;QACJ,OAAO,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IACzC,CAAC;IAED,WAAW;QACT,OAAO,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC;IACtC,CAAC;IAED,UAAU;QACR,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,2BAA2B,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC3E,IAAI,GAAG,GAAU,EAAE,CAAC;YAEpB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACzC,IAAI,MAAM,GAAG,EAAE,CAAC;oBAChB,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,EAAE,EAAE;wBAClC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;qBAC/C;oBAED,GAAG,CAAC,IAAI,CAAC;wBACP,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;wBACxB,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI;wBAC5B,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY;qBACxC,CAAC,CAAC;iBACL;aACF;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,cAAc,CAAC,IAAI,EAAE,YAAY;QAC/B,IAAI,IAAI,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;QAChC,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,4DAA4D,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC9G,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,cAAc,CAAC,EAAE;QACf,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,wCAAwC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC1F,OAAO;gBACL,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;gBACxB,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI;gBAC5B,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY;aACzC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iBAAiB,CAAC,EAAE;QAClB,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,sCAAsC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;YACrF,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iBAAiB,CAAC,GAAQ;QACxB,IAAI,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC;QACpC,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,gEAAgE,GAAG,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC1H,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC,CAAC;IACJ,CAAC;IAED,YAAY;QACV,IAAI,KAAK,GAAG,2IAA2I,CAAC;QACxJ,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACrD,IAAI,QAAQ,GAAG,EAAE,CAAC;YAClB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACxB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACzC,QAAQ,CAAC,IAAI,CAAC;wBACZ,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI;wBAC5B,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE;wBACxB,WAAW,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW;wBAC1C,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY;qBAC5C,CAAC,CAAC;iBACL;aACF;YACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU,CAAC,IAAI,EAAE,WAAW,EAAE,YAAY;QACxC,IAAI,IAAI,GAAG,CAAC,IAAI,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;QAC7C,OAAO,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,iEAAiE,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YACnH,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;CACF;;YAnH0B,uDAAQ;YAAwB,4EAAY;YAAkB,+DAAM;YAAgB,+DAAU;;AAP5G,eAAe;IAH3B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;2EAQyB,uDAAQ,EAAwB,4EAAY,EAAkB,+DAAM,EAAgB,+DAAU;GAP5G,eAAe,CA0H3B;AA1H2B","file":"pages-listar-centro-de-custo-listar-centro-de-custo-module-es2015.js","sourcesContent":["export default \"<ion-header class=\\\"border\\\">\\n\\n    <ion-toolbar color=\\\"primary\\\">\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button color=\\\"secondary\\\"></ion-back-button>\\n        </ion-buttons>\\n        <ion-title color=\\\"secondary\\\">UDESC</ion-title>\\n        <ion-icon size=\\\"large\\\" class=\\\"ion-padding-end\\\" slot=\\\"end\\\" src=\\\"/assets/icon/logomarca.svg\\\"></ion-icon>\\n    </ion-toolbar>\\n\\n    <ion-toolbar color=\\\"primary\\\">\\n        <ion-grid class=\\\"justify-center\\\">\\n            <ion-text size=\\\"large\\\" class=\\\"ion-padding-start\\\" color=\\\"secondary\\\">Lista Centro de Custo</ion-text>\\n        </ion-grid>\\n    </ion-toolbar>\\n\\n</ion-header>\\n\\n<ion-content padding>\\n\\n    <ion-segment [(ngModel)]=\\\"selectedView\\\">\\n        <ion-segment-button value=\\\"centroCusto\\\">\\n            <ion-label>Centro de Custo</ion-label>\\n        </ion-segment-button>\\n        <ion-segment-button value=\\\"produtos\\\">\\n            <ion-label>Produtos</ion-label>\\n        </ion-segment-button>\\n    </ion-segment>\\n\\n    <div [ngSwitch]=\\\"selectedView\\\">\\n        <div *ngSwitchCase=\\\"'centroCusto'\\\">\\n            <ion-item>\\n                <ion-label position=\\\"stacked\\\">Qual o nome do Centro de Custo?</ion-label>\\n                <ion-input [(ngModel)]=\\\"centroCusto.nome\\\" placeholder=\\\"Nome do Centro de Custo\\\"></ion-input>\\n            </ion-item>\\n            <ion-item>\\n                <ion-label position=\\\"stacked\\\">Qual o cpodigo de barras do Centro de Custo?</ion-label>\\n                <ion-input [(ngModel)]=\\\"centroCusto.codigoBarras\\\" placeholder=\\\"CÃ³digo lido...\\\"></ion-input>\\n            </ion-item>\\n            <ion-button expand=\\\"block\\\" (click)=\\\"addCentroCusto()\\\">Adicionar Centro de Custo</ion-button>\\n\\n            <ion-list>\\n                <ion-item button *ngFor=\\\"let cc of centroCusto\\\" [routerLink]=\\\"['/', 'centroCusto', cc.id]\\\">\\n                    <ion-label>\\n                        <h2>{{ cc.nome }}</h2>\\n                        <p>{{ cc.codigoBarras }}</p>\\n                    </ion-label>\\n                </ion-item>\\n            </ion-list>\\n        </div>\\n\\n        <div *ngSwitchCase=\\\"'produtos'\\\">\\n            <ion-item>\\n                <ion-label position=\\\"stacked\\\">Nome do Produto</ion-label>\\n                <ion-input [(ngModel)]=\\\"produto.nome\\\" placeholder=\\\"Nome\\\"></ion-input>\\n            </ion-item>\\n            <ion-item>\\n                <ion-label position=\\\"stacked\\\">Centro de Custo Pertencente:</ion-label>\\n                <ion-select [(ngModel)]=\\\"produto.centroCusto\\\">\\n                    <ion-select-option *ngFor=\\\"let cc of centroCusto\\\" [value]=\\\"cc.id\\\">{{ cc.nome }}</ion-select-option>\\n                </ion-select>\\n            </ion-item>\\n            <ion-item>\\n                <ion-label position=\\\"stacked\\\">Qual o cpodigo de barras do Produto?</ion-label>\\n                <ion-input [(ngModel)]=\\\"produto.codigoBarras\\\" placeholder=\\\"CÃ³digo lido...\\\"></ion-input>\\n            </ion-item>\\n            <ion-button expand=\\\"block\\\" (click)=\\\"addProduto()\\\">Adicionar Produto</ion-button>\\n\\n            <ion-list>\\n                <ion-item *ngFor=\\\"let prod of produtos | async\\\">\\n                    <ion-label>\\n                        <h2>{{ prod.nome }}</h2>\\n                        <p>Centro de Custo: {{ prod.centroCusto }}</p>\\n                        <p>CÃ³digo de Barras: {{ prod.codigoBarras }}</p>\\n                    </ion-label>\\n                </ion-item>\\n            </ion-list>\\n        </div>\\n    </div>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ListarCentroDeCustoPage } from './listar-centro-de-custo.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListarCentroDeCustoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ListarCentroDeCustoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListarCentroDeCustoPageRoutingModule } from './listar-centro-de-custo-routing.module';\n\nimport { ListarCentroDeCustoPage } from './listar-centro-de-custo.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ListarCentroDeCustoPageRoutingModule\n  ],\n  declarations: [ListarCentroDeCustoPage]\n})\nexport class ListarCentroDeCustoPageModule {}\n","export default \".border {\\n  border-bottom: solid 2px;\\n  border-color: #1a4a24;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL21hdGhldXNxdW9zdC9Eb2N1bWVudG9zL05pVC9sZWl0b3ItdWRlc2Mvc3JjL2FwcC9wYWdlcy9saXN0YXItY2VudHJvLWRlLWN1c3RvL2xpc3Rhci1jZW50cm8tZGUtY3VzdG8ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9saXN0YXItY2VudHJvLWRlLWN1c3RvL2xpc3Rhci1jZW50cm8tZGUtY3VzdG8ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksd0JBQUE7RUFDQSxxQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvbGlzdGFyLWNlbnRyby1kZS1jdXN0by9saXN0YXItY2VudHJvLWRlLWN1c3RvLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5ib3JkZXIge1xuICAgIGJvcmRlci1ib3R0b206IHNvbGlkIDJweDtcbiAgICBib3JkZXItY29sb3I6ICMxYTRhMjQ7XG59IiwiLmJvcmRlciB7XG4gIGJvcmRlci1ib3R0b206IHNvbGlkIDJweDtcbiAgYm9yZGVyLWNvbG9yOiAjMWE0YTI0O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\n\nimport { DatabaseService, Dev } from 'src/app/services/database.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'app-listar-centro-de-custo',\n  templateUrl: './listar-centro-de-custo.page.html',\n  styleUrls: ['./listar-centro-de-custo.page.scss'],\n})\nexport class ListarCentroDeCustoPage implements OnInit {\n\n  ccs: Dev[] = [];\n \n  produtos: Observable<any[]>;\n \n  centroCusto = {};\n  produto = {};\n \n  selectedView = 'ccs';\n \n  constructor(private db: DatabaseService) { }\n\n  ngOnInit() {\n    this.db.getDatabaseState().subscribe(rdy => {\n      if (rdy) {\n        this.db.getCcs().subscribe(ccs => {\n          this.centroCusto = ccs;\n        })\n        this.produtos = this.db.getProdutos();\n      }\n    });\n  }\n\n  addCentroCusto() { \n    this.db.addCentroCusto(this.centroCusto['nome'], this.centroCusto['codeRead'])\n    .then(_ => {\n      this.centroCusto = {};\n    });\n  }\n \n  addProduto() {\n    this.db.addProduto(this.produto['nome'], this.produto['codigoBarras'], this.produto['centroCusto'])\n    .then(_ => {\n      this.produto = {};\n    });\n  }\n\n  /* Como colocar dados JSON em um array no Ionic:\n   *\n   * var json;\n   *\n   * this.http.get('link/to/your/api').map(res => res.json()).subscribe(data => {\n   *   json = data;\n   * });\n   * \n   * e depois:\n   * \n   * and then parse it in this way:\n   * \n   * var qp = []\n   * for (var i of json.data) {\n   *    p.push(i.quantity_produced);\n   * }\n   * \n   * Bether solution:\n   * \n   * \n\ninterface Product {\n  id: number;\n  date: string;\n  // &c\n}\n\ninterface ProductsResponse {\n  data: Product[];\n}\n\nclass Provider {\n  constructor(private _http: HttpClient) {}\n  allProducts(): Observable<Product[]> {\n    return this._http.get<ProductsResponse>(url).pipe(\n      map(prsp => prsp.data));\n\n  onlyQuantities(): Observable<number[]> {\n    return this.allProducts().pipe(\n      map(prods => prods.map(prod => prod[\"quantity_produced\"])));\n  }\n}\n   * \n   * \n   * https://forum.ionicframework.com/t/how-to-get-json-data-in-array-in-ionic/98552\n   * \n   */\n}\n","import { Injectable } from '@angular/core';\n\nimport { Platform } from '@ionic/angular';\nimport { SQLitePorter } from '@ionic-native/sqlite-porter/ngx';\nimport { HttpClient } from '@angular/common/http';\nimport { SQLite, SQLiteObject } from '@ionic-native/sqlite/ngx';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nexport interface Dev {\n  id: number,\n  nome: string,\n  codeRead: string\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DatabaseService {\n  private database: SQLiteObject;\n  private dbReady: BehaviorSubject<boolean> = new BehaviorSubject(false);\n \n  centroCusto = new BehaviorSubject([]);\n  produtos = new BehaviorSubject([]);\n\n  constructor(private plt: Platform, private sqlitePorter: SQLitePorter, private sqlite: SQLite, private http: HttpClient) { \n    this.plt.ready().then(() => {\n      this.sqlite.create({\n        name: 'patrimonio.db',\n        location: 'default'\n      })\n      .then((db: SQLiteObject) => {\n          this.database = db;\n          this.seedDatabase();\n      });\n    });\n  }\n\n  seedDatabase() {\n    this.http.get('/assets/arquivos/insert.sql', { responseType: 'text'})\n    .subscribe(sql => {\n      this.sqlitePorter.importSqlToDb(this.database, sql)\n        .then(_ => {\n          this.carregaCcs();\n          this.loadProdutos();\n          this.dbReady.next(true);\n        })\n        .catch(e => console.error(e));\n    });\n  }\n\n  getDatabaseState() {\n    return this.dbReady.asObservable();\n  }\n \n  getCcs(): Observable<Dev[]> {\n    return this.centroCusto.asObservable();\n  }\n \n  getProdutos(): Observable<any[]> {\n    return this.produtos.asObservable();\n  }\n\n  carregaCcs() {\n    return this.database.executeSql('SELECT * FROM centroCusto', []).then(data => {\n      let ccs: Dev[] = [];\n \n      if (data.rows.length > 0) {\n        for (var i = 0; i < data.rows.length; i++) {\n          let skills = [];\n          if (data.rows.item(i).skills != '') {\n            skills = JSON.parse(data.rows.item(i).skills);\n          }\n \n          ccs.push({ \n            id: data.rows.item(i).id,\n            nome: data.rows.item(i).nome,  \n            codeRead: data.rows.item(i).codigoBarras\n           });\n        }\n      }\n      this.centroCusto.next(ccs);\n    });\n  }\n \n  addCentroCusto(nome, codigoBarras) {\n    let data = [nome, codigoBarras];\n    return this.database.executeSql('INSERT INTO centroCusto (nome, codigoBarras) VALUES (?, ?)', data).then(data => {\n      this.carregaCcs();\n    });\n  }\n \n  getCentroCusto(id): Promise<Dev> {\n    return this.database.executeSql('SELECT * FROM centroCusto WHERE id = ?', [id]).then(data => { \n      return {\n        id: data.rows.item(0).id,\n        nome: data.rows.item(0).nome,  \n        codeRead: data.rows.item(0).codigoBarras\n      }\n    });\n  }\n \n  deleteCentroCusto(id) {\n    return this.database.executeSql('DELETE FROM centroCusto WHERE id = ?', [id]).then(_ => {\n      this.carregaCcs();\n      this.loadProdutos();\n    });\n  }\n \n  updateCentroCusto(dev: Dev) {\n    let data = [dev.nome, dev.codeRead];\n    return this.database.executeSql(`UPDATE centroCusto SET nome = ?, codigoBarras = ? WHERE id = ${dev.id}`, data).then(data => {\n      this.carregaCcs();\n    })\n  }\n \n  loadProdutos() {\n    let query = 'SELECT produto.nome, produto.codigoBarras, centroCusto.nome AS centroCusto FROM produto JOIN centroCusto ON centroCusto.id = produto.ccId';\n    return this.database.executeSql(query, []).then(data => {\n      let produtos = [];\n      if (data.rows.length > 0) {\n        for (var i = 0; i < data.rows.length; i++) {\n          produtos.push({ \n            nome: data.rows.item(i).name,\n            id: data.rows.item(i).id,\n            centroCusto: data.rows.item(i).centroCusto,\n            codigoBarras: data.rows.item(i).codigoBarras,\n           });\n        }\n      }\n      this.produtos.next(produtos);\n    });\n  }\n \n  addProduto(nome, centroCusto, codigoBarras) {\n    let data = [nome, centroCusto, codigoBarras];\n    return this.database.executeSql('INSERT INTO produto (nome, ccId, codigoBarras) VALUES (?, ?, ?)', data).then(data => {\n      this.loadProdutos();\n    });\n  }\n}\n\n"],"sourceRoot":"webpack:///"}